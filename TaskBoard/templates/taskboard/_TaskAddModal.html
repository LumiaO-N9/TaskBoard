<div class="modal fade" tabindex="-1"
     id="EditTaskModal">
    <span id="store_milestone_id_when_add_task" hidden></span>
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close"
                        data-dismiss="modal"
                        aria-label="Close"><span
                        aria-hidden="true">&times;</span></button>
                <h3 id="add_or_edit_task" class="modal-title">Add Task</h3>
            </div>
            <div class="modal-body">
                <div class="row">
                    <div class="form-group col-sm-12">
                        <label>Name</label>
                        <span id="old_task_title_span" hidden></span>
                        <input id="task_title_input" type="text" name="task_title"
                               class="form-control" data-rule='maxlength:30|minlength:3'
                               placeholder="Task Name">
                        <div id="task_title-input-error" class="input-error">至少3位，最多30位</div>
                    </div>
                </div>
                <div class="row">
                    <div class="form-group col-sm-12">
                        <label>Description</label>
                        <textarea id="task_add_modal_textarea" class="form-control" rows="4"
                                  placeholder="What needs to get done?"></textarea>
                    </div>
                </div>
                <div class="row">
                    <div class="col-xs-4 form-group">
                        <label>Assigned To</label>
                        <select id="task_add_modal_user" class="form-control" name="user_select">
                            {% for user in users %}
                                {% if user.id == current_user.id %}
                                    <option id="user_select_{{ user.id }}" value="{{ user.id }}"
                                            selected>{{ user.username }}</option>
                                {% else %}
                                    <option id="user_select_{{ user.id }}"
                                            value="{{ user.id }}">{{ user.username }}</option>
                                {% endif %}
                            {% endfor %}
                        </select>
                    </div>
                    <div class="col-xs-4 form-group">
                        <label>Category</label>
                        <select id="task_add_modal_category" class="form-control" name="category_select">
                            {% for category in categories %}
                                {% if loop.index == 1 %}
                                    <option id="category_select_{{ category.id }}" value="{{ category.id }}"
                                            selected>{{ category.title }}</option>
                                {% else %}
                                    <option id="category_select_{{ category.id }}"
                                            value="{{ category.id }}">{{ category.title }}</option>
                                {% endif %}
                            {% endfor %}
                        </select>
                    </div>
                    <div class="col-xs-4 form-group">
                        <label>Milestone</label>
                        <select id="task_add_modal_milestone" class="form-control" name="milestone_select">
                            {% for milestone in milestones %}
                                <option id="milestone_select_{{ milestone.id }}"
                                        value="{{ milestone.id }}">{{ milestone.title }}</option>
                            {% endfor %}
                        </select>
                    </div>
                </div>
                <div class="row">
                    <div class="col-xs-4 form-group">
                        <label>Color</label>
                        <div>
                            <input disabled type="text"
                                   id="color_text" class="form-control"
                                   name="CategoryNameInput"
                                   placeholder="#D9EDF7">
                            <div id="Color_picker"></div>
                        </div>
                    </div>
                    <div class="col-xs-4 form-group ">
                        <label>Date Due</label>
                        <input type="text" class="form-control" id="date_picker" placeholder="yyyy-MM-dd">
                    </div>
                    <div class="col-xs-4 form-group">
                        <label>Points</label>
                        <input class="form-control" id="task_points" type="number" min="0" value="0">
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default"
                        data-dismiss="modal">Close
                </button>
                <a id="task_submit_button" type="button" class="btn btn-primary" name="delete"
                   onclick="task_modal_save()">Add Task
                </a>
            </div>
        </div>
    </div>
</div>